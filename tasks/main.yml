---
- name: Use the distro version of Ansible to install another version using pip
  block:

    - name: Check variables
      include_tasks: checks.yml

    - name: Install Ansible when the proposed version is greater than the installed version
      include_tasks: ansible.yml
      when: ans_version is version(ans_installed_version, '>')

    - name: Install Ansible collections
      include_tasks: collection.yml
      loop: "{{ ans_collections }}"
      loop_control:
        loop_var: col
        label: "{{ col.name }}"

    - name: Check variables
      include_tasks: checks.yml

  when: ans
  tags:
    - ansible
...
